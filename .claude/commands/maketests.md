add functional tests for $ARGUMENTS. Do not mock/stub anything. Make sure to test failure cases as well (e.g. if the request_event is missing or invalid).
